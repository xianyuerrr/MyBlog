---
title: HTTP和HTTPS
tags:
  - 计网
  - 面试
categories:
  - 计算机
comments: true
toc: true
aplayer: false
dplayer: false
date: 2021-08-14 13:53:35
cover: https://cdn.jsdelivr.net/gh/xianyuerrr/PicGo/img/OneDrive/图片/pixiv/90365455_p0.jpg
---
# HTTP 和 HTTPS

## HTTP

使用**TCP**

HTTP 最重要也是最突出的优点是 **简单、灵活、易于扩展**。

因为 HTTP 协议本身不属于一种语言，它并不限定某种编程语言或者操作系统，所以天然具有**跨语言、跨平台**的优越性。

**无状态**，每个请求都是完全独立的，简单，不需要使用状态机

无状态其实既是优点又是缺点。因为服务器没有记忆能力，所以就不需要额外的资源来记录状态信息，不仅实现上会简单一些，而且还能减轻服务器的负担，能够把更多的 CPU 和内存用来对外提供服务。

既然服务器没有记忆能力，它就无法支持需要连续多个步骤的`事务`操作。每次都得问一遍身份信息，不仅麻烦，而且还增加了不必要的数据传输量。由此出现了 `Cookie` 技术。

**明文传输**，不安全

**no-cache**：必须先与服务器确认返回的响应是否被更改，然后才能使用该响应来满足后续对同一个网址的请求。

**no-store：**所有内容都不会被缓存或 Internet 临时文件中

### Cookie与Session

Cookie带来的问题：

1.每次页面请求都会把cookies往服务器上送一次，**浪费了带宽**；

2.状态数据**存放在浏览器上太危险**了，而且Cookies在HTTP请求中是以明文传输的。

3.Cookie的**大小**限制在4KB, 对于复杂的状态数据显然不够用。

主流的做法是：

1、浏览器向HTTP服务器发出第一个请求时，服务器分配一个SessionID, 存入浏览器的Cookies中。这个SessionID一般是一个类似于GUID的字符串，几十个字节，也不多。

2、**服务器上维持一个会话状态数据库**（也可能是个内存表），用SessionID作为标识存放每一个会话的状态信息。

3、每一次浏览器发出请求时，都将这个SessionID向服务器提交一次，便于服务器根据它获得之前的会话数据，写入新的会话数据。

## HTTPS

### 对称加密与非对称加密

对称加密：加密与解密使用同一个密钥

优缺点：算法公开，计算量小，加密速度快、效率高；但由于加密解密都使用同一个密钥，而由于信道是不安全的，导致其不安全。



非对称加密：双方各有自己的公钥与私钥，使用公钥加密将发送的信息，使用私钥解密接收到的信息。只在信道上沟通用于加密的公钥，由于解密的私钥未曾在信道上传输，所以私钥是安全的，也即非对称加密是安全的。

优缺点：算法复杂，安全性高；但同时也由于其算法复杂，导致效率低下

![image-20210914161127660](https://raw.githubusercontent.com/xianyuerrr/PicGo/main/img/20210914161130.png)

### HTTPS采用的加密方式

由于对称加密不安全，非对称加密

HTTPS采用对称与非对称结合的加密方式，这种方式看似安全实则不然。在没有引入证书之前，这种对称与非对称结合的加密方式也并非是传输安全的。

他无法防范这种中间人攻击，中间人可以轻而易举的获取其沟通所得的对称密钥。

而其之所以不安全，是因为**客户端不知道，这把公钥是不是服务器的**。解决这个问题的方式就是使用数字证书。

![image-20210914160825223](https://raw.githubusercontent.com/xianyuerrr/PicGo/main/img/20210914160828.png)
